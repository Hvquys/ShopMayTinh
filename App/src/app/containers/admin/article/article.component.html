<nz-breadcrumb>
  <nz-breadcrumb-item>
    <i nz-icon nzType="home"></i>
  </nz-breadcrumb-item>
  <nz-breadcrumb-item>
    Quản lý bài viết
  </nz-breadcrumb-item>
</nz-breadcrumb>

<div class="mg-t" nz-row>
  <div nz-col nzSpan="10">
    <nz-form-item>
      <nz-form-label>Từ khóa tìm kiếm</nz-form-label>
      <nz-form-control>
        <input (keyup.enter)="getData()" [(ngModel)]="filter.keySearch" nz-input nzSize="small"
               placeholder="Tiêu đề, danh mục"
               type="text"/>
      </nz-form-control>
    </nz-form-item>
  </div>
  <div nz-col nzSpan="14">
    <nz-form-item>
      <nz-form-control>
        <button (click)="getData()" nz-button nzSize="small" nzType="primary">
          <i nz-icon nzTheme="outline" nzType="search"></i>
          Tìm kiếm
        </button>
        <button (click)="addNew()" nz-button nzSize="small" nzType="primary">
          <i nz-icon nzTheme="outline" nzType="plus"></i>
          Thêm mới
        </button>
      </nz-form-control>
    </nz-form-item>
  </div>

  <div class="mg-t" nz-col nzSpan="24">
    <nz-table #tblData [nzShowTotal]="showTotalTpl" [nzShowTotal]="showTotalTpl" [nzData]="datas" [nzPageSize]="100"
              [nzScroll]="{y:'calc(100vh - 280px)'}">
      <thead>
      <tr>
        <th nzAlign="center" nzWidth="80px">Hình ảnh</th>
        <th>Tiêu đề</th>
        <th nzWidth="180px">Danh mục</th>
        <th nzAlign="center" nzWidth="80px">Thứ tự hiển thị</th>
        <th nzAlign="center" nzWidth="80px">Active</th>
        <th nzAlign="center" nzWidth="150px">Ngày tạo</th>
        <th nzWidth="180px"></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of tblData.data">
        <td nzAlign="center">
          <img [src]="data.image | fullPathResource" alt="" class="img-article">
        </td>
        <td>{{ data.title }}</td>
        <td>{{ data.menu.name }}</td>
        <td nzAlign="center">{{ data.index }}</td>
        <td nzAlign="center">
          <i *ngIf="data.active" nz-icon nzTheme="outline" nzType="check"></i>
        </td>
        <td nzAlign="center">{{ data.created | date:'HH:mm dd-MM-yyyy' }}</td>
        <td>
          <button (click)="showDetail(data)" class="mg-r" nz-button nzSize="small">
            Xem chi tiết
          </button>
          <button (nzOnConfirm)="delete(data)" nz-button nz-popconfirm
                  nzDanger nzPopconfirmPlacement="topRight" nzPopconfirmTitle="Xác nhận xóa?" nzSize="small"
                  nzType="primary">
            Xóa
          </button>
        </td>
      </tr>
      </tbody>
    </nz-table>
    <ng-template #showTotalTpl let-range="range" let-total>
      {{ range[0] }}-{{ range[1] }} of {{ total | number }} bản ghi
    </ng-template>
  </div>
</div>

<app-article-detail #frmDetail (onSubmit)="onSubmit($event)"></app-article-detail>
<ngx-spinner></ngx-spinner>
